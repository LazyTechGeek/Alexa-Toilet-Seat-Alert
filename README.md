Desctiption: Make Alexa Call People Out for Leaving the Toilet Seat Up! (Node-RED Tutorial)

Link to YouTube video: https://youtu.be/HoYak0LTelg

This is the code for the Node-Red process flow

- Copy the below code to the clipboard then from Node-Red cick the 3 horizontal lines
- Select Import
- Paste the code into the Window and Select Import
- Configure the 2 Nodes referencing your door sensors
- Confugure the Alexa node to reference your Amazon account and Alexa device
- Deploy the changes to apply

- **Full Code for Alexa-Toilet-Seat-Alert**
```
[{"id":"c108082cfcae1a82","type":"tab","label":"Toilet Seat (Zigbee)","disabled":false,"info":"","env":[]},{"id":"536ad7ae3e3e8260","type":"function","z":"c108082cfcae1a82","name":"Bathroom Door is Closed","func":"flow.set (\"bathroom_door_open\",false);\nvar bathroom_door_open_status = flow.get (\"bathroom_door_open\");\nmsg.topic= bathroom_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":209.0994415283203,"y":178.2465991973877,"wires":[[]]},{"id":"237a6796ece0952a","type":"function","z":"c108082cfcae1a82","name":"Bathroom Door is Open","func":"flow.set(\"bathroom_door_open\",true);\nvar bathroom_door_open_status = flow.get(\"bathroom_door_open\");\nmsg.topic = bathroom_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":209.0994415283203,"y":216.95177555084229,"wires":[[]]},{"id":"92c38cf4ca42c3bb","type":"function","z":"c108082cfcae1a82","name":"Toilet Seat is Down","func":"flow.set (\"toilet_seat_up\",false);\nvar toilet_seat_up_status = flow.get (\"toilet_seat\");\nmsg.topic= toilet_seat_up_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":606.4435234069824,"y":183.84813563028968,"wires":[[]]},{"id":"ca653b3c8cf69a67","type":"function","z":"c108082cfcae1a82","name":"Toilet Seat is Up","func":"flow.set (\"toilet_seat_up\",true);\nvar toilet_seat_up_status = flow.get (\"toilet_seat\");\nmsg.topic= toilet_seat_up_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":371.2293014526367,"y":906.236668586731,"wires":[[]]},{"id":"9fadf210f01c288d","type":"comment","z":"c108082cfcae1a82","name":"Change Entity to Your Toilet Seat Sensor","info":"","x":676.4435234069824,"y":76.73544502258301,"wires":[]},{"id":"8e479b0f7f74f8a0","type":"comment","z":"c108082cfcae1a82","name":"Run when bathroom door opens","info":"","x":184.31948852539062,"y":1114.2576351165771,"wires":[]},{"id":"25de21e6febee85b","type":"function","z":"c108082cfcae1a82","name":"Get Toilet Seat Up Status","func":"var ObtainedData = flow.get (\"toilet_seat_up\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":397.73639187812796,"y":1157.490240573883,"wires":[["ec292176f0473f01"]]},{"id":"ec292176f0473f01","type":"switch","z":"c108082cfcae1a82","name":"If toilet Seat is Up","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":624.093986940384,"y":1164.990240573883,"wires":[["0e02f81e0fd58442"],[],[]]},{"id":"0e02f81e0fd58442","type":"function","z":"c108082cfcae1a82","name":"Check if Nagging is Enabled","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":860.45158200264,"y":1157.490240573883,"wires":[["2797e44565d6e04b"]]},{"id":"2797e44565d6e04b","type":"switch","z":"c108082cfcae1a82","name":"If nagging_on_status is true","property":"topic","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1126.8091770648957,"y":1157.490240573883,"wires":[[],["96fd9b89c3eb4856"]]},{"id":"b7549fdb188d5c15","type":"switch","z":"c108082cfcae1a82","name":"If bathroom door is open","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":714.6466522216797,"y":1033.8475341796875,"wires":[["02ba1ddb40650043"],[],[]]},{"id":"863c11adfdbefb86","type":"function","z":"c108082cfcae1a82","name":"Check if Nagging is Enabled","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1663.1016235351562,"y":1026.3475341796875,"wires":[["fd1f7b5fc82caec9"]]},{"id":"fd1f7b5fc82caec9","type":"switch","z":"c108082cfcae1a82","name":"If nagging_on_status is true","property":"topic","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1929.2532806396484,"y":1026.3475341796875,"wires":[[],["6fa6cc62b3e3c2c8"]]},{"id":"81768b709d45d41c","type":"function","z":"c108082cfcae1a82","name":"Get toilet door open / closed status","func":"var ObtainedData = flow.get (\"bathroom_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":438.4949951171875,"y":1026.3475341796875,"wires":[["b7549fdb188d5c15"]]},{"id":"1b5408db7c998216","type":"comment","z":"c108082cfcae1a82","name":"Run when toilet seat is down","info":"","x":160.15807342529297,"y":981.9508781433105,"wires":[]},{"id":"773395ea18c745f1","type":"server-state-changed","z":"c108082cfcae1a82","name":"Bathroom Door Status","server":"67fb9d0f.36c644","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["binary_sensor.sensor_bathroom_door_contact"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"off","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":199.0994415283203,"y":124.45069980621338,"wires":[["536ad7ae3e3e8260"],["237a6796ece0952a","cfb3eb98bc8292ac"]]},{"id":"52caa1a317400f1b","type":"server-state-changed","z":"c108082cfcae1a82","name":"Toilet Seat Status","server":"67fb9d0f.36c644","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["binary_sensor.sensor_toilet_seat_contact"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"on","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":596.4435234069824,"y":130.45083236694336,"wires":[["92c38cf4ca42c3bb","57d7939e4008eabc"],["25bb2c6ca00db4bf"]]},{"id":"c68fbb7a7eff1012","type":"function","z":"c108082cfcae1a82","name":"Get Bathroom Door Open / Closed Status","func":"var ObtainedData = flow.get(\"bathroom_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":448.92860412597656,"y":863.5379095077515,"wires":[["ddac1e8033f4c056"]]},{"id":"ddac1e8033f4c056","type":"switch","z":"c108082cfcae1a82","name":"If bathroom door is open","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":748.1349487304688,"y":861.9506711959839,"wires":[["cbc22b12dfaa7681"],["8ecc5456635fce20"],["8ecc5456635fce20"]]},{"id":"cbc22b12dfaa7681","type":"function","z":"c108082cfcae1a82","name":"set \"seat lifted_when door open\" to true","func":"flow.set (\"seat_lifted_when_door_open\",true);\nvar seat_lifted_when_door_open_status = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= seat_lifted_when_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1061.626937866211,"y":830.0459356307983,"wires":[[]]},{"id":"8ecc5456635fce20","type":"function","z":"c108082cfcae1a82","name":"set \"seat lifted_when door open\" to false","func":"flow.set (\"seat_lifted_when_door_open\",false);\nvar seat_lifted_when_door_open_status = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= seat_lifted_when_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1061.9443969726562,"y":883.220458984375,"wires":[[]]},{"id":"02ba1ddb40650043","type":"function","z":"c108082cfcae1a82","name":"Get \"seat_lifted_when_door_open\" status","func":"var ObtainedData = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1010.7983093261719,"y":1026.3475341796875,"wires":[["35b0e96a4c4c65a7"]]},{"id":"35b0e96a4c4c65a7","type":"switch","z":"c108082cfcae1a82","name":"If \"seat_lifted_when_door_open\" is false","property":"seat_lifted_when_door_open","propertyType":"flow","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1356.949966430664,"y":1026.3475341796875,"wires":[[],["863c11adfdbefb86"]]},{"id":"8ef406af08e12476","type":"function","z":"c108082cfcae1a82","name":"Random Nagging For Leaving Toilet Seat Up","func":"var line1 = [\n        \"Hey!, \",\n        \"Oi!, \",\n        \"Mate!, \",\n        \"Did I really just witness this?,\",\n        \"oh for crying out loud,\",\n        \"Excuse me, \"\n        ]\n        \nvar line2 = [\n        \"you've left the toilet seat up. \",\n        \"you didn't put the seat down. \",\n        \"the toilet seat is still up. \"\n        ]\n        \nvar line3 = [\n        \"go back and close it \",\n        \"Turn around and shut it! \",\n        \"close it now \"\n        ]\n        \nvar line4 = [\n        \"you \",\n        \"you \"\n        ]\n        \nvar line5 = [\n        \"dirty \",\n        \"lazy \",\n        \"disgusting \",\n        \"revolting \",\n        \"phile \",\n        \"despicable \",\n        \"pathetic\",\n        \"filthy \"\n        ]\n        \nvar line6 = [\n        \"git\",\n        \"walking embarrassment\",\n        \"individual\",\n        \"human\",\n        \"creature\",\n        \"animal\",\n        \"beast\",\n        \"excuse of a human being\",\n        \"slob \"\n        ]        \n\nmsg.payload =\n\nline1[Math.floor(Math.random() * line1.length)]+\nline2[Math.floor(Math.random() * line2.length)]+\nline3[Math.floor(Math.random() * line3.length)]+\nline4[Math.floor(Math.random() * line4.length)]+\nline5[Math.floor(Math.random() * line5.length)]+\nline6[Math.floor(Math.random() * line6.length)]\n\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1993.83345413208,"y":468.4903202056885,"wires":[["dd1598b9b7065dd6"]]},{"id":"8b23a7a13fb5869a","type":"alexa-remote-routine","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device","account":"d52478f1.087f58","routineNode":{"type":"speak","payload":{"type":"regular","text":{"type":"msg","value":"payload"},"devices":["G0014C0594551CG2"]}},"x":1063.502082824707,"y":134.84744834899902,"wires":[[]]},{"id":"9c9b9b4cdacfb6d4","type":"function","z":"c108082cfcae1a82","name":"Random Response after Closing Toilet Seat","func":"var line1 = [\n        \"Thankyou!, \",\n        \"Thanks, \",\n        \"good, \"\n        ]\nvar line2 = [\n        \"dont \",\n        \"you better not \"\n        ]\nvar line3 = [\n        \"make me \",\n        \"cause me to \",\n        \"make this a habbit and force me to \",\n        \"repeat this so that I have to \"\n        ]\nvar line4 = [\n        \"shout \",\n        \"complain \",\n        \"yell \"\n        ]\nvar line5 = [\n        \"again\",\n        \"once again\",\n        \"another time\"\n        ]        \n\nmsg.payload =\n\nline1[Math.floor(Math.random() * line1.length)]+\nline2[Math.floor(Math.random() * line2.length)]+\nline3[Math.floor(Math.random() * line3.length)]+\nline4[Math.floor(Math.random() * line4.length)]+\nline5[Math.floor(Math.random() * line4.length)]\n\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":2017.5476722717285,"y":652.6332302093506,"wires":[["a10bfbec0cbe43ac"]]},{"id":"25e1203403c2283c","type":"delay","z":"c108082cfcae1a82","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1738.2619895935059,"y":468.06179332733154,"wires":[["8ef406af08e12476"]]},{"id":"2943bb92edfbe9e5","type":"switch","z":"c108082cfcae1a82","name":"Null?","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1638.3835716247559,"y":467.4787244796753,"wires":[["25e1203403c2283c"]],"l":false},{"id":"aca9efc731fc5710","type":"catch","z":"c108082cfcae1a82","name":"Alexa errors","scope":["8b23a7a13fb5869a"],"uncaught":false,"x":1531.3834495544434,"y":467.58974742889404,"wires":[["2943bb92edfbe9e5"]]},{"id":"a61d10a27f9aa130","type":"delay","z":"c108082cfcae1a82","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1751.2619895935059,"y":653.0617933273315,"wires":[["9c9b9b4cdacfb6d4"]]},{"id":"57bcf7dcba91aba1","type":"switch","z":"c108082cfcae1a82","name":"Null?","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1628.3835697174072,"y":653.4787034988403,"wires":[["a61d10a27f9aa130"]],"l":false},{"id":"400baa1792a5552b","type":"catch","z":"c108082cfcae1a82","name":"Alexa errors","scope":["e1dd64f4204d8773"],"uncaught":false,"x":1509.3834495544434,"y":654.589747428894,"wires":[["57bcf7dcba91aba1"]]},{"id":"57dc45a4b0d39f6e","type":"link in","z":"c108082cfcae1a82","name":"Link in_Post Toilet Seat Close Nag","links":["6fa6cc62b3e3c2c8"],"x":1579.5476722717285,"y":705.6331691741943,"wires":[["9c9b9b4cdacfb6d4"]],"l":true},{"id":"6fa6cc62b3e3c2c8","type":"link out","z":"c108082cfcae1a82","name":"Link out","mode":"link","links":["57dc45a4b0d39f6e"],"x":2135.4049377441406,"y":1026.3475341796875,"wires":[],"l":true},{"id":"f7636163dc9ff818","type":"link in","z":"c108082cfcae1a82","name":"Link in_Toilet Seat Up Nag","links":["96fd9b89c3eb4856"],"x":1565.118984222412,"y":512.9188842773438,"wires":[["8ef406af08e12476"]],"l":true},{"id":"96fd9b89c3eb4856","type":"link out","z":"c108082cfcae1a82","name":"Link out 2","mode":"link","links":["f7636163dc9ff818"],"x":1333.1667721271515,"y":1157.490240573883,"wires":[],"l":true},{"id":"591dd7ad46d11ea3","type":"comment","z":"c108082cfcae1a82","name":"Turn Nagging On / Off","info":"","x":140.98614764213562,"y":457.9383382797241,"wires":[]},{"id":"736e3e7ba8316930","type":"inject","z":"c108082cfcae1a82","name":"Nagging on","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":129.03970336914062,"y":502.8436117172241,"wires":[["189432ad0d09f33f"]]},{"id":"c07062e8f3e66164","type":"inject","z":"c108082cfcae1a82","name":"Nagging off","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":128.4047622680664,"y":552.9003467559814,"wires":[["107bc2404fce50b6"]]},{"id":"189432ad0d09f33f","type":"function","z":"c108082cfcae1a82","name":"Turn on Nagging","func":"flow.set (\"nagging_on\",true);\nvar nagging_on_status = flow.get (\"nagging_on\");\nmsg.topic= nagging_on_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":309.94457244873047,"y":502.8436117172241,"wires":[["cab9484637a26a06"]]},{"id":"107bc2404fce50b6","type":"function","z":"c108082cfcae1a82","name":"Turn off Nagging","func":"flow.set (\"nagging_on\",false);\nvar nagging_on_status = flow.get (\"nagging_on\");\nmsg.topic= nagging_on_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":309.62710189819336,"y":552.9003467559814,"wires":[["9e0ed4a95c6dc686"]]},{"id":"d02307ac2265d6f8","type":"switch","z":"c108082cfcae1a82","name":"Check if Nagging is Enabled","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":527.0968227386475,"y":695.9323263168335,"wires":[["94d3c7f57257c7bb"],["be64f3f125a01f72"],["3653a665a4594c13"]]},{"id":"d966fb480ae3dd8a","type":"function","z":"c108082cfcae1a82","name":"Get Nagging Status","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":289.7635555267334,"y":688.4324245452881,"wires":[["d02307ac2265d6f8"]]},{"id":"2ecfcb67134232db","type":"inject","z":"c108082cfcae1a82","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"check nagging status","payload":"","payloadType":"date","x":117.84915351867676,"y":688.4324245452881,"wires":[["d966fb480ae3dd8a"]]},{"id":"b9d886fed32a10ad","type":"comment","z":"c108082cfcae1a82","name":"Get Nagging Status","info":"","x":130.98614764213562,"y":642.1656303405762,"wires":[]},{"id":"80cdfcb4593b6118","type":"comment","z":"c108082cfcae1a82","name":"NAG Toilet seat is up!","info":"","x":1559.412452697754,"y":420.8470678329468,"wires":[]},{"id":"56832eda7a08ced3","type":"comment","z":"c108082cfcae1a82","name":"POST NAG after closing toilet seat","info":"","x":1577.983814239502,"y":606.5613393783569,"wires":[]},{"id":"cfb3eb98bc8292ac","type":"link out","z":"c108082cfcae1a82","name":"If Bathroom Door Open","mode":"link","links":["749b0f8adbd9d920"],"x":209.0994415283203,"y":255.65695190429688,"wires":[],"l":true},{"id":"749b0f8adbd9d920","type":"link in","z":"c108082cfcae1a82","name":"If Bathroom Door Open","links":["cfb3eb98bc8292ac"],"x":161.3787968158722,"y":1157.490240573883,"wires":[["25de21e6febee85b"]],"l":true},{"id":"955a10f74a3125f2","type":"link in","z":"c108082cfcae1a82","name":"If Toilet Seat if Down (IN)","links":["57d7939e4008eabc"],"x":162.3433380126953,"y":1026.3475341796875,"wires":[["81768b709d45d41c"]],"l":true},{"id":"57d7939e4008eabc","type":"link out","z":"c108082cfcae1a82","name":"If Toilet Seat if Down (OUT)","mode":"link","links":["955a10f74a3125f2"],"x":636.4435234069824,"y":220.3645270665487,"wires":[],"l":true},{"id":"25bb2c6ca00db4bf","type":"link out","z":"c108082cfcae1a82","name":"If Toilet Seat is Up (OUT)","mode":"link","links":["7cc04c22c916b491"],"x":626.4435234069824,"y":256.8809185028076,"wires":[],"l":true},{"id":"7cc04c22c916b491","type":"link in","z":"c108082cfcae1a82","name":"If Toilet Seat is Up (IN)","links":["25bb2c6ca00db4bf"],"x":152.91470336914062,"y":879.6826238632202,"wires":[["c68fbb7a7eff1012","ca653b3c8cf69a67"]],"l":true},{"id":"dd1598b9b7065dd6","type":"link out","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["cdfd3e0a45899625"],"x":2366.9898262023926,"y":470.1388626098633,"wires":[],"l":true},{"id":"cdfd3e0a45899625","type":"link in","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device (IN)","links":["dd1598b9b7065dd6","a10bfbec0cbe43ac","12e6d05a8a8b435c","b6bac43ba0bad6c0"],"x":1073.502082824707,"y":237.02770900726318,"wires":[["523e2ad76f284e89"]],"l":true},{"id":"a10bfbec0cbe43ac","type":"link out","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["cdfd3e0a45899625"],"x":2389.4086952209473,"y":653.7041606903076,"wires":[],"l":true},{"id":"c4034be830f81826","type":"comment","z":"c108082cfcae1a82","name":"Change Entity to Your Bathroom Door Sensor","info":"","x":269.0994415283203,"y":76.73544502258301,"wires":[]},{"id":"7d83be694df7e9ad","type":"comment","z":"c108082cfcae1a82","name":"Change Device to your Amazon Echo","info":"","x":1040.6448822021484,"y":76.73544502258301,"wires":[]},{"id":"73ddfd53c9db8f82","type":"comment","z":"c108082cfcae1a82","name":"########### Do Not Edit the Below!!! ###########","info":"","x":674.0994644165039,"y":391.09375,"wires":[]},{"id":"ebcd715e6a7e5bbe","type":"comment","z":"c108082cfcae1a82","name":"This part prevents the routine from working if the bathroom door open","info":"","x":280.9861476421356,"y":814.2354001998901,"wires":[]},{"id":"cab9484637a26a06","type":"function","z":"c108082cfcae1a82","name":"Nagging Enabled","func":"msg.payload = \"Nagging enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510.8494415283203,"y":502.8436117172241,"wires":[["12e6d05a8a8b435c"]]},{"id":"12e6d05a8a8b435c","type":"link out","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["cdfd3e0a45899625"],"x":812.8494491577148,"y":526.5709056854248,"wires":[],"l":true},{"id":"9e0ed4a95c6dc686","type":"function","z":"c108082cfcae1a82","name":"Nagging Disabled","func":"msg.payload = \"Nagging disabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510.8494415283203,"y":552.9003467559814,"wires":[["12e6d05a8a8b435c"]]},{"id":"94d3c7f57257c7bb","type":"function","z":"c108082cfcae1a82","name":"Nagging Enabled","func":"msg.payload = \"Nagging enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":776.8494663238525,"y":662.3887710571289,"wires":[["b6bac43ba0bad6c0"]]},{"id":"b6bac43ba0bad6c0","type":"link out","z":"c108082cfcae1a82","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["cdfd3e0a45899625"],"x":1172.8494873046875,"y":695.3890190124512,"wires":[],"l":true},{"id":"be64f3f125a01f72","type":"function","z":"c108082cfcae1a82","name":"Nagging Disabled","func":"msg.payload = \"Nagging disabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":776.8494663238525,"y":697.3887701034546,"wires":[["b6bac43ba0bad6c0"]]},{"id":"3653a665a4594c13","type":"function","z":"c108082cfcae1a82","name":"Undefined So Nagging is Enabled","func":"msg.payload = \"undefined so nagging is enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":826.8494663238525,"y":733.3888912200928,"wires":[["b6bac43ba0bad6c0"]]},{"id":"95b32e66d55d74e0","type":"comment","z":"c108082cfcae1a82","name":"########### Do Not Edit the Below!!! ###########","info":"","x":1108.0994873046875,"y":391.09375,"wires":[]},{"id":"dbd81f1629d21056","type":"comment","z":"c108082cfcae1a82","name":"########### Do Not Edit the Below!!! ###########","info":"","x":240.0994415283203,"y":391.09375,"wires":[]},{"id":"523e2ad76f284e89","type":"delay","z":"c108082cfcae1a82","name":"","pauseType":"delay","timeout":"1.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":973.502082824707,"y":184.70535373687744,"wires":[["8b23a7a13fb5869a"]]},{"id":"bc95e3d46ac204a7","type":"function","z":"c108082cfcae1a82","name":"Random Nagging For Leaving Toilet Seat Up","func":"var line1 = [\n        \"Hey!, \",\n        \"Oi!, \",\n        \"Mate!, \",\n        \"Did I really just witness this?,\",\n        \"oh for crying out loud,\",\n        \"Excuse me, \"\n        ]\n        \nvar line2 = [\n        \"you've left the toilet seat up. \",\n        \"you didn't put the seat down. \",\n        \"the toilet seat is still up. \"\n        ]\n        \nvar line3 = [\n        \"go back and close it \",\n        \"Turn around and shut it! \",\n        \"close it now \"\n        ]\n        \nvar line4 = [\n        \"you \",\n        \"you \"\n        ]\n        \nvar line5 = [\n        \"dirty \",\n        \"lazy \",\n        \"disgusting \",\n        \"revolting \",\n        \"phile \",\n        \"despicable \",\n        \"pathetic \",\n        \"filthy \"\n        ]\n        \nvar line6 = [\n        \"git\",\n        \"walking embarrassment\",\n        \"individual\",\n        \"human\",\n        \"creature\",\n        \"animal\",\n        \"beast\",\n        \"excuse of a human being\",\n        \"slob\"\n        ]        \n\nmsg.payload =\n\nline1[Math.floor(Math.random() * line1.length)]+\nline2[Math.floor(Math.random() * line2.length)]+\nline3[Math.floor(Math.random() * line3.length)]+\nline4[Math.floor(Math.random() * line4.length)]+\nline5[Math.floor(Math.random() * line5.length)]+\nline6[Math.floor(Math.random() * line6.length)]\n\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1920.6613464355469,"y":842.9911060333252,"wires":[["86f0956a1d7dbeeb"]]},{"id":"2d0feacd48d79546","type":"inject","z":"c108082cfcae1a82","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1645.0648612976072,"y":842.8226950422014,"wires":[["bc95e3d46ac204a7"]]},{"id":"86f0956a1d7dbeeb","type":"debug","z":"c108082cfcae1a82","name":"debug 7","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2183.648654937744,"y":842.8145885467529,"wires":[]},{"id":"c0ea6c650dc2f7a3","type":"comment","z":"c108082cfcae1a82","name":"Example","info":"","x":1806.3758544921875,"y":787.2767944335938,"wires":[]},{"id":"67fb9d0f.36c644","type":"server","name":"Home Assistant","version":5,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"y|yes|true|on|home|open","connectionDelay":true,"cacheJson":true,"heartbeat":false,"heartbeatInterval":30,"areaSelector":"friendlyName","deviceSelector":"friendlyName","entitySelector":"friendlyName","statusSeparator":"at: ","statusYear":"hidden","statusMonth":"short","statusDay":"numeric","statusHourCycle":"h23","statusTimeFormat":"h:m","enableGlobalContextStore":true},{"id":"d52478f1.087f58","type":"alexa-remote-account","name":"","authMethod":"proxy","proxyOwnIp":"192.168.1.113","proxyPort":"3456","cookieFile":"/config/alexa_cookies12.txt","refreshInterval":"3","alexaServiceHost":"alexa.amazon.co.uk","amazonPage":"amazon.co.uk","acceptLanguage":"en-UK","userAgent":"","useWsMqtt":"on","autoInit":"on"}]
```
