Description: Make Alexa Call People Out for Leaving the Toilet Seat Up! (Node-RED Tutorial)

Link to YouTube video: https://youtu.be/HoYak0LTelg

This is the code for the Node-Red process flow

- Copy the below code to the clipboard then from Node-Red cick the 3 horizontal lines
- Select Import
- Paste the code into the Window and Select Import
- Configure the 2 Nodes referencing your door sensors
- Confugure the Alexa node to reference your Amazon account and Alexa device
- Deploy the changes to apply

- **Full Code for Alexa-Toilet-Seat-Alert**
```
[{"id":"c7228ff37c654f59","type":"function","z":"5b2a3bef4c04aa7a","name":"Bathroom Door is Closed","func":"flow.set (\"bathroom_door_open\",false);\nvar bathroom_door_open_status = flow.get (\"bathroom_door_open\");\nmsg.topic= bathroom_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":208.66665649414062,"y":177.4848976135254,"wires":[[]]},{"id":"8d102c67fa9a98a8","type":"function","z":"5b2a3bef4c04aa7a","name":"Bathroom Door is Open","func":"flow.set(\"bathroom_door_open\",true);\nvar bathroom_door_open_status = flow.get(\"bathroom_door_open\");\nmsg.topic = bathroom_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":208.66665649414062,"y":216.19007396697998,"wires":[[]]},{"id":"35c3b66b480e9ab3","type":"function","z":"5b2a3bef4c04aa7a","name":"Toilet Seat is Down","func":"flow.set(\"toilet_seat_up\", false);\n\nvar toilet_seat_up_status = flow.get(\"toilet_seat_up\");\nvar nagged_already = flow.get(\"nagged_already\") || false;\n\nif (nagged_already) {\n    msg.payload = \"Post nag triggered\";  // This sends to Alexa\n    flow.set(\"nagged_already\", false);   // Reset nag flag\n    return msg;\n} else {\n    return null;  // Do nothing if nagged_already is false\n}\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":606.0107383728027,"y":183.08643404642737,"wires":[[]]},{"id":"dfaafefc3c4eebe8","type":"function","z":"5b2a3bef4c04aa7a","name":"Toilet Seat is Up","func":"flow.set(\"toilet_seat_up\", true);\nflow.set(\"nagged_already\", true);  // Set nag flag when seat is up\n\nvar toilet_seat_up_status = flow.get(\"toilet_seat_up\");\nmsg.topic = toilet_seat_up_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":370.79651641845703,"y":905.4749670028687,"wires":[[]]},{"id":"68d8128598eeb03c","type":"comment","z":"5b2a3bef4c04aa7a","name":"Change Entity to Your Toilet Seat Sensor","info":"","x":676.0107383728027,"y":75.9737434387207,"wires":[]},{"id":"4e328a5dc2132b5a","type":"comment","z":"5b2a3bef4c04aa7a","name":"Run when bathroom door opens","info":"","x":183.88670349121094,"y":1113.4959335327148,"wires":[]},{"id":"60f95db7118c7475","type":"function","z":"5b2a3bef4c04aa7a","name":"Get Toilet Seat Up Status","func":"var ObtainedData = flow.get (\"toilet_seat_up\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":397.3036068439483,"y":1156.7285389900208,"wires":[["e371d02076c21894"]]},{"id":"e371d02076c21894","type":"switch","z":"5b2a3bef4c04aa7a","name":"If toilet Seat is Up","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":623.6612019062043,"y":1164.2285389900208,"wires":[["ad0ac368f194109f"],[],[]]},{"id":"ad0ac368f194109f","type":"function","z":"5b2a3bef4c04aa7a","name":"Check if Nagging is Enabled","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":860.0187969684603,"y":1156.7285389900208,"wires":[["7602bfd072cef812"]]},{"id":"7602bfd072cef812","type":"switch","z":"5b2a3bef4c04aa7a","name":"If nagging_on_status is true","property":"topic","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1126.376392030716,"y":1156.7285389900208,"wires":[[],["88b2d8c1ed65c9b9"]]},{"id":"5d68b50a1d623a3e","type":"switch","z":"5b2a3bef4c04aa7a","name":"If bathroom door is open","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":714.2138671875,"y":1033.0858325958252,"wires":[["189abf3df774a95c"],[],[]]},{"id":"c4b5ce1fea7b518a","type":"function","z":"5b2a3bef4c04aa7a","name":"Check if Nagging is Enabled","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1662.6688385009766,"y":1025.5858325958252,"wires":[["d8bf9ab7eb97af73"]]},{"id":"d8bf9ab7eb97af73","type":"switch","z":"5b2a3bef4c04aa7a","name":"If nagging_on_status is true","property":"topic","propertyType":"msg","rules":[{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1928.8204956054688,"y":1025.5858325958252,"wires":[[],["bf682213555edd39"]]},{"id":"f0277f790491640a","type":"function","z":"5b2a3bef4c04aa7a","name":"Get toilet door open / closed status","func":"var ObtainedData = flow.get (\"bathroom_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":438.0622100830078,"y":1025.5858325958252,"wires":[["5d68b50a1d623a3e"]]},{"id":"bd68d6b8fdd99c97","type":"comment","z":"5b2a3bef4c04aa7a","name":"Run when toilet seat is down","info":"","x":159.72528839111328,"y":981.1891765594482,"wires":[]},{"id":"907a12cfce6fc23f","type":"server-state-changed","z":"5b2a3bef4c04aa7a","name":"Bathroom Door Status","server":"67fb9d0f.36c644","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["binary_sensor.sensor_bathroom_door_contact"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"off","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":198.66665649414062,"y":123.68899822235107,"wires":[["c7228ff37c654f59"],["8d102c67fa9a98a8","6a656f24f6922bf8"]]},{"id":"7cf02a0776de996a","type":"server-state-changed","z":"5b2a3bef4c04aa7a","name":"Toilet Seat Status","server":"67fb9d0f.36c644","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["binary_sensor.sensor_toilet_seat_contact"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"on","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":596.0107383728027,"y":129.68913078308105,"wires":[["35c3b66b480e9ab3","d412fcde1418b4a1"],["3ee0b522b6ed72de"]]},{"id":"3bc4474407ce4018","type":"function","z":"5b2a3bef4c04aa7a","name":"Get Bathroom Door Open / Closed Status","func":"var ObtainedData = flow.get(\"bathroom_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":448.4958190917969,"y":862.7762079238892,"wires":[["fb7c0487fce0f554"]]},{"id":"fb7c0487fce0f554","type":"switch","z":"5b2a3bef4c04aa7a","name":"If bathroom door is open","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":747.7021636962891,"y":861.1889696121216,"wires":[["027d232231e47628"],["7bd24134888693dd"],["7bd24134888693dd"]]},{"id":"027d232231e47628","type":"function","z":"5b2a3bef4c04aa7a","name":"set \"seat lifted_when door open\" to true","func":"flow.set (\"seat_lifted_when_door_open\",true);\nvar seat_lifted_when_door_open_status = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= seat_lifted_when_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1061.1941528320312,"y":829.284234046936,"wires":[[]]},{"id":"7bd24134888693dd","type":"function","z":"5b2a3bef4c04aa7a","name":"set \"seat lifted_when door open\" to false","func":"flow.set (\"seat_lifted_when_door_open\",false);\nvar seat_lifted_when_door_open_status = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= seat_lifted_when_door_open_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1061.5116119384766,"y":882.4587574005127,"wires":[[]]},{"id":"189abf3df774a95c","type":"function","z":"5b2a3bef4c04aa7a","name":"Get \"seat_lifted_when_door_open\" status","func":"var ObtainedData = flow.get (\"seat_lifted_when_door_open\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1010.3655242919922,"y":1025.5858325958252,"wires":[["0d28d766712745cb"]]},{"id":"0d28d766712745cb","type":"switch","z":"5b2a3bef4c04aa7a","name":"If \"seat_lifted_when_door_open\" is false","property":"seat_lifted_when_door_open","propertyType":"flow","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1356.5171813964844,"y":1025.5858325958252,"wires":[[],["c4b5ce1fea7b518a"]]},{"id":"9a37c29b01c3798e","type":"function","z":"5b2a3bef4c04aa7a","name":"Random Nagging For Leaving Toilet Seat Up","func":"var line1 = [\n        \"Hey!, \",\n        \"Oi!, \",\n        \"Mate!, \",\n        \"Did I really just witness this?,\",\n        \"oh for crying out loud,\",\n        \"Excuse me, \"\n        ]\n        \nvar line2 = [\n        \"you've left the toilet seat up. \",\n        \"you didn't put the seat down. \",\n        \"the toilet seat is still up. \"\n        ]\n        \nvar line3 = [\n        \"go back and close it \",\n        \"Turn around and shut it! \",\n        \"close it now \"\n        ]\n        \nvar line4 = [\n        \"you \",\n        \"you \"\n        ]\n        \nvar line5 = [\n        \"dirty \",\n        \"lazy \",\n        \"disgusting \",\n        \"revolting \",\n        \"phile \",\n        \"despicable \",\n        \"pathetic\",\n        \"filthy \"\n        ]\n        \nvar line6 = [\n        \"git\",\n        \"walking embarrassment\",\n        \"individual\",\n        \"human\",\n        \"creature\",\n        \"animal\",\n        \"beast\",\n        \"excuse of a human being\",\n        \"slob \"\n        ]        \n\nmsg.payload =\n\nline1[Math.floor(Math.random() * line1.length)]+\nline2[Math.floor(Math.random() * line2.length)]+\nline3[Math.floor(Math.random() * line3.length)]+\nline4[Math.floor(Math.random() * line4.length)]+\nline5[Math.floor(Math.random() * line5.length)]+\nline6[Math.floor(Math.random() * line6.length)]\n\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1993.4006690979004,"y":467.7286186218262,"wires":[["0eae82a9d395676a"]]},{"id":"16f5c438c00828b7","type":"alexa-remote-routine","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device","account":"d52478f1.087f58","routineNode":{"type":"speak","payload":{"type":"regular","text":{"type":"msg","value":"payload"},"devices":["G0014C0594551CG2"]}},"x":1063.0692977905273,"y":134.08574676513672,"wires":[[]]},{"id":"4d0946c941694990","type":"function","z":"5b2a3bef4c04aa7a","name":"Random Response after Closing Toilet Seat","func":"var line1 = [\n        \"Thankyou!, \",\n        \"Thanks, \",\n        \"good, \"\n        ]\nvar line2 = [\n        \"dont \",\n        \"you better not \"\n        ]\nvar line3 = [\n        \"make me \",\n        \"cause me to \",\n        \"make this a habbit and force me to \",\n        \"repeat this so that I have to \"\n        ]\nvar line4 = [\n        \"shout \",\n        \"complain \",\n        \"yell \"\n        ]\nvar line5 = [\n        \"again\",\n        \"once again\",\n        \"another time\"\n        ]        \n\nmsg.payload =\n\nline1[Math.floor(Math.random() * line1.length)]+\nline2[Math.floor(Math.random() * line2.length)]+\nline3[Math.floor(Math.random() * line3.length)]+\nline4[Math.floor(Math.random() * line4.length)]+\nline5[Math.floor(Math.random() * line4.length)]\n\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":2017.1148872375488,"y":651.8715286254883,"wires":[["a197a81202496ec4"]]},{"id":"e17532b13d4e637f","type":"delay","z":"5b2a3bef4c04aa7a","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1737.8292045593262,"y":467.30009174346924,"wires":[["9a37c29b01c3798e"]]},{"id":"be1ddde060aef28a","type":"switch","z":"5b2a3bef4c04aa7a","name":"Null?","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1637.9507865905762,"y":466.717022895813,"wires":[["e17532b13d4e637f"]],"l":false},{"id":"5d8463627f1f9640","type":"catch","z":"5b2a3bef4c04aa7a","name":"Alexa errors","scope":["16f5c438c00828b7"],"uncaught":false,"x":1530.9506645202637,"y":466.82804584503174,"wires":[["be1ddde060aef28a"]]},{"id":"5c3df7ea26d3e7f9","type":"delay","z":"5b2a3bef4c04aa7a","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1750.8292045593262,"y":652.3000917434692,"wires":[["4d0946c941694990"]]},{"id":"2546b2f5a89ff121","type":"switch","z":"5b2a3bef4c04aa7a","name":"Null?","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1627.9507846832275,"y":652.717001914978,"wires":[["5c3df7ea26d3e7f9"]],"l":false},{"id":"f7b5f0fe76a51a46","type":"catch","z":"5b2a3bef4c04aa7a","name":"Alexa errors","scope":["e1dd64f4204d8773"],"uncaught":false,"x":1508.9506645202637,"y":653.8280458450317,"wires":[["2546b2f5a89ff121"]]},{"id":"7f43b7bda95f6cd1","type":"link in","z":"5b2a3bef4c04aa7a","name":"Link in_Post Toilet Seat Close Nag","links":["bf682213555edd39"],"x":1579.1148872375488,"y":704.871467590332,"wires":[["4d0946c941694990"]],"l":true},{"id":"bf682213555edd39","type":"link out","z":"5b2a3bef4c04aa7a","name":"Link out","mode":"link","links":["7f43b7bda95f6cd1"],"x":2134.972152709961,"y":1025.5858325958252,"wires":[],"l":true},{"id":"0c0b2b5c261e422a","type":"link in","z":"5b2a3bef4c04aa7a","name":"Link in_Toilet Seat Up Nag","links":["88b2d8c1ed65c9b9"],"x":1564.6861991882324,"y":512.1571826934814,"wires":[["9a37c29b01c3798e"]],"l":true},{"id":"88b2d8c1ed65c9b9","type":"link out","z":"5b2a3bef4c04aa7a","name":"Link out 2","mode":"link","links":["0c0b2b5c261e422a"],"x":1332.7339870929718,"y":1156.7285389900208,"wires":[],"l":true},{"id":"83bbb8347121a17f","type":"comment","z":"5b2a3bef4c04aa7a","name":"Turn Nagging On / Off","info":"","x":140.55336260795593,"y":457.1766366958618,"wires":[]},{"id":"f0a9fbaaf0cf99b8","type":"inject","z":"5b2a3bef4c04aa7a","name":"Nagging on","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":128.60691833496094,"y":502.0819101333618,"wires":[["9b02a010d5deb9d7"]]},{"id":"2883cfe23d7dcc6c","type":"inject","z":"5b2a3bef4c04aa7a","name":"Nagging off","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":127.97197723388672,"y":552.1386451721191,"wires":[["398bdefbea32f8fe"]]},{"id":"9b02a010d5deb9d7","type":"function","z":"5b2a3bef4c04aa7a","name":"Turn on Nagging","func":"flow.set (\"nagging_on\",true);\nvar nagging_on_status = flow.get (\"nagging_on\");\nmsg.topic= nagging_on_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":309.5117874145508,"y":502.0819101333618,"wires":[["403d781cf8bba0a6"]]},{"id":"398bdefbea32f8fe","type":"function","z":"5b2a3bef4c04aa7a","name":"Turn off Nagging","func":"flow.set (\"nagging_on\",false);\nvar nagging_on_status = flow.get (\"nagging_on\");\nmsg.topic= nagging_on_status;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":309.1943168640137,"y":552.1386451721191,"wires":[["4889729d93bbd6a9"]]},{"id":"06fbc1b3d598659b","type":"switch","z":"5b2a3bef4c04aa7a","name":"Check if Nagging is Enabled","property":"topic","propertyType":"msg","rules":[{"t":"true"},{"t":"false"},{"t":"cont","v":"undefined","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":526.6640377044678,"y":695.1706247329712,"wires":[["8821b1b3db7ccc76"],["802985bce6316a6f"],["5078d2579eaf92d1"]]},{"id":"c2e89cd7759526ee","type":"function","z":"5b2a3bef4c04aa7a","name":"Get Nagging Status","func":"var ObtainedData = flow.get (\"nagging_on\");\nmsg.topic= ObtainedData;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":289.3307704925537,"y":687.6707229614258,"wires":[["06fbc1b3d598659b"]]},{"id":"623ad643d16cf213","type":"inject","z":"5b2a3bef4c04aa7a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"check nagging status","payload":"","payloadType":"date","x":117.41636848449707,"y":687.6707229614258,"wires":[["c2e89cd7759526ee"]]},{"id":"39f7e01e4ff83204","type":"comment","z":"5b2a3bef4c04aa7a","name":"Get Nagging Status","info":"","x":130.55336260795593,"y":641.4039287567139,"wires":[]},{"id":"cf700949846f22ee","type":"comment","z":"5b2a3bef4c04aa7a","name":"NAG Toilet seat is up!","info":"","x":1558.9796676635742,"y":420.0853662490845,"wires":[]},{"id":"1c36ee3d1e6c4f98","type":"comment","z":"5b2a3bef4c04aa7a","name":"POST NAG after closing toilet seat","info":"","x":1577.5510292053223,"y":605.7996377944946,"wires":[]},{"id":"6a656f24f6922bf8","type":"link out","z":"5b2a3bef4c04aa7a","name":"If Bathroom Door Open","mode":"link","links":["2ba977a69e44051a"],"x":208.66665649414062,"y":254.89525032043457,"wires":[],"l":true},{"id":"2ba977a69e44051a","type":"link in","z":"5b2a3bef4c04aa7a","name":"If Bathroom Door Open","links":["6a656f24f6922bf8"],"x":160.9460117816925,"y":1156.7285389900208,"wires":[["60f95db7118c7475"]],"l":true},{"id":"74f011e191230db4","type":"link in","z":"5b2a3bef4c04aa7a","name":"If Toilet Seat if Down (IN)","links":["d412fcde1418b4a1"],"x":161.91055297851562,"y":1025.5858325958252,"wires":[["f0277f790491640a"]],"l":true},{"id":"d412fcde1418b4a1","type":"link out","z":"5b2a3bef4c04aa7a","name":"If Toilet Seat if Down (OUT)","mode":"link","links":["74f011e191230db4"],"x":636.0107383728027,"y":219.6028254826864,"wires":[],"l":true},{"id":"3ee0b522b6ed72de","type":"link out","z":"5b2a3bef4c04aa7a","name":"If Toilet Seat is Up (OUT)","mode":"link","links":["7eec5cccd1067166"],"x":626.0107383728027,"y":256.1192169189453,"wires":[],"l":true},{"id":"7eec5cccd1067166","type":"link in","z":"5b2a3bef4c04aa7a","name":"If Toilet Seat is Up (IN)","links":["3ee0b522b6ed72de"],"x":152.48191833496094,"y":878.9209222793579,"wires":[["3bc4474407ce4018","dfaafefc3c4eebe8"]],"l":true},{"id":"0eae82a9d395676a","type":"link out","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["9f239e59b81cd2d1"],"x":2366.557041168213,"y":469.377161026001,"wires":[],"l":true},{"id":"9f239e59b81cd2d1","type":"link in","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device (IN)","links":["0eae82a9d395676a","a197a81202496ec4","89cbd4572e9808d3","e5f6e14c1366675c"],"x":1073.0692977905273,"y":236.26600742340088,"wires":[["232b041826a462e7"]],"l":true},{"id":"a197a81202496ec4","type":"link out","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["9f239e59b81cd2d1"],"x":2388.9759101867676,"y":652.9424591064453,"wires":[],"l":true},{"id":"97fc8f7ea884927d","type":"comment","z":"5b2a3bef4c04aa7a","name":"Change Entity to Your Bathroom Door Sensor","info":"","x":268.6666564941406,"y":75.9737434387207,"wires":[]},{"id":"808d0598bcfaa594","type":"comment","z":"5b2a3bef4c04aa7a","name":"Change Device to your Amazon Echo","info":"","x":1040.2120971679688,"y":75.9737434387207,"wires":[]},{"id":"99fd73d512db5279","type":"comment","z":"5b2a3bef4c04aa7a","name":"########### Do Not Edit the Below!!! ###########","info":"","x":673.6666793823242,"y":390.3320484161377,"wires":[]},{"id":"3aed47ee603a3691","type":"comment","z":"5b2a3bef4c04aa7a","name":"This part prevents the routine from working if the bathroom door open","info":"","x":280.55336260795593,"y":813.4736986160278,"wires":[]},{"id":"403d781cf8bba0a6","type":"function","z":"5b2a3bef4c04aa7a","name":"Nagging Enabled","func":"msg.payload = \"Nagging enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510.4166564941406,"y":502.0819101333618,"wires":[["89cbd4572e9808d3"]]},{"id":"89cbd4572e9808d3","type":"link out","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["9f239e59b81cd2d1"],"x":812.4166641235352,"y":525.8092041015625,"wires":[],"l":true},{"id":"4889729d93bbd6a9","type":"function","z":"5b2a3bef4c04aa7a","name":"Nagging Disabled","func":"msg.payload = \"Nagging disabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510.4166564941406,"y":552.1386451721191,"wires":[["89cbd4572e9808d3"]]},{"id":"8821b1b3db7ccc76","type":"function","z":"5b2a3bef4c04aa7a","name":"Nagging Enabled","func":"msg.payload = \"Nagging enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":776.4166812896729,"y":661.6270694732666,"wires":[["e5f6e14c1366675c"]]},{"id":"e5f6e14c1366675c","type":"link out","z":"5b2a3bef4c04aa7a","name":"Broadcast Announcement to Alexa Device (OUT)","mode":"link","links":["9f239e59b81cd2d1"],"x":1172.4167022705078,"y":694.6273174285889,"wires":[],"l":true},{"id":"802985bce6316a6f","type":"function","z":"5b2a3bef4c04aa7a","name":"Nagging Disabled","func":"msg.payload = \"Nagging disabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":776.4166812896729,"y":696.6270685195923,"wires":[["e5f6e14c1366675c"]]},{"id":"5078d2579eaf92d1","type":"function","z":"5b2a3bef4c04aa7a","name":"Undefined So Nagging is Enabled","func":"msg.payload = \"undefined so nagging is enabled\";\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":826.4166812896729,"y":732.6271896362305,"wires":[["e5f6e14c1366675c"]]},{"id":"d104a0f2505456f1","type":"comment","z":"5b2a3bef4c04aa7a","name":"########### Do Not Edit the Below!!! ###########","info":"","x":1107.6667022705078,"y":390.3320484161377,"wires":[]},{"id":"6393044e0fd50e30","type":"comment","z":"5b2a3bef4c04aa7a","name":"########### Do Not Edit the Below!!! ###########","info":"","x":239.66665649414062,"y":390.3320484161377,"wires":[]},{"id":"232b041826a462e7","type":"delay","z":"5b2a3bef4c04aa7a","name":"","pauseType":"delay","timeout":"1.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":973.0692977905273,"y":183.94365215301514,"wires":[["16f5c438c00828b7"]]},{"id":"67fb9d0f.36c644","type":"server","name":"Home Assistant","version":5,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"y|yes|true|on|home|open","connectionDelay":true,"cacheJson":true,"heartbeat":false,"heartbeatInterval":30,"areaSelector":"friendlyName","deviceSelector":"friendlyName","entitySelector":"friendlyName","statusSeparator":"at: ","statusYear":"hidden","statusMonth":"short","statusDay":"numeric","statusHourCycle":"h23","statusTimeFormat":"h:m","enableGlobalContextStore":true},{"id":"d52478f1.087f58","type":"alexa-remote-account","name":"","authMethod":"proxy","proxyOwnIp":"192.168.1.113","proxyPort":"3456","cookieFile":"/config/alexa_cookies12.txt","refreshInterval":"3","alexaServiceHost":"alexa.amazon.co.uk","amazonPage":"amazon.co.uk","acceptLanguage":"en-UK","userAgent":"","useWsMqtt":"on","autoInit":"on"}]
```
